<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wikipedia Search</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            padding: 50px;
            background-color: #f4f4f4;
        }

        h1 {
            margin-bottom: 30px;
        }

        input[type="text"] {
            padding: 10px;
            width: 300px;
            font-size: 16px;
        }

        button {
            padding: 10px;
            font-size: 16px;
            background-color: #4CAF50;
            color: white;
            border: none;
            cursor: pointer;
        }

        button:hover {
            background-color: #45a049;
        }

        .search-container {
            margin-top: 20px;
        }

        #result {
            margin-top: 30px;
            text-align: left;
            padding: 20px;
            background-color: #ffffff;
            border: 1px solid #dddddd;
        }

        #result img {
            max-width: 200px;
            margin-right: 20px;
        }

        #result h2 {
            font-size: 24px;
            margin-bottom: 10px;
        }

        #result p {
            font-size: 16px;
            line-height: 1.6;
        }
    </style>
</head>
<body>
    <h1>Search Wikipedia</h1>

    <div class="search-container">
        <input type="text" id="searchQuery" placeholder="Enter your search term...">
        <button onclick="searchWiki()">Search</button>
    </div>

    <div id="result"></div>

    <script>
        async function searchWiki() {
            const query = document.getElementById("searchQuery").value.trim();
            const resultDiv = document.getElementById("result");
            resultDiv.innerHTML = ""; // Clear previous results

            if (query) {
                // Normalize the input
                const normalizedQuery = query.replace(/\s+/g, '_'); // Replace spaces with underscores

                // Wikipedia API URL for searching titles
                const searchUrl = `https://en.wikipedia.org/w/api.php?action=query&list=search&format=json&origin=*&srsearch=${encodeURIComponent(query)}`;

                try {
                    const searchResponse = await fetch(searchUrl);
                    const searchData = await searchResponse.json();

                    if (searchData.query.search.length === 0) {
                        resultDiv.innerHTML = "<p>No results found. Try refining your search.</p>";
                        return;
                    }

                    // Use the first search result for further querying
                    const firstResult = searchData.query.search[0];
                    const pageId = firstResult.pageid;

                    // Get page details using the page ID
                    const detailsUrl = `https://en.wikipedia.org/w/api.php?action=query&format=json&origin=*&prop=extracts|pageimages&exintro&explaintext&piprop=thumbnail&pithumbsize=300&pageids=${pageId}`;
                    const detailsResponse = await fetch(detailsUrl);
                    const detailsData = await detailsResponse.json();

                    const pages = detailsData.query.pages;

                    // Get the first page in the response
                    for (let pageId in pages) {
                        const page = pages[pageId];

                        if (page.missing || !page.extract) {
                            resultDiv.innerHTML = "<p>No information available for this search.</p>";
                            return;
                        }

                        // Page title and extract (summary)
                        const title = page.title;
                        const extract = page.extract || "No summary available for this topic.";

                        // Optional: Thumbnail image if it exists
                        const imgSrc = page.thumbnail ? page.thumbnail.source : '';

                        // Create the result HTML
                        let resultHTML = `<h2>${title}</h2><p>${extract}</p>`;

                        if (imgSrc) {
                            resultHTML = `<img src="${imgSrc}" alt="${title}">` + resultHTML;
                        }

                        // Show the result in the 'result' div
                        resultDiv.innerHTML = resultHTML;
                    }

                } catch (error) {
                    console.error('Error fetching data:', error);
                    resultDiv.innerHTML = "An error occurred while fetching the data.";
                }
            }
        }
    </script>
</body>
</html>
